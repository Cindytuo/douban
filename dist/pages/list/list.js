"use strict";var app=getApp(),global=app.globalData,service=require("../../common/service"),Promise=require("../../util/es6-promise.min").Promise,load=global.load,ctrlConfig={drawStar:function(o){},random:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return parseInt(Math.random()*a+o)}},Model={showing:[load,load,load],hoting:[load,load,load],douList:load,popular:load,adver:load};Page({data:Model,onLoad:function(){var o=this,a={title:load,body:load,star:load,user:load,movieName:load},t=ctrlConfig.random(0,80),e={city:"上海",start:0,count:3},n={city:"上海",start:t,count:3};Promise.all([service.getIntheaters(e),service.getTop(n),service.getReviews()]).then(function(a){console.log(a);var t=a[0].data.subjects,e=a[1].data.subjects,n=a[2].data;o.setData({showing:t,hoting:e,popular:n})}).catch(function(o){console.log(o)}),ctrlConfig.drawStar(a.star)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},flow:function(o){var a=o.currentTarget,t=o.target;return console.log({cTarget:a}),console.log({Target:t}),"show-btn"==t.dataset.name?void console.log("dingpiao"):void wx.navigateTo({url:"../detail/detail?id="+a.id})}});